<!DOCTYPE html>
<html lang="en">
<head>
      <link rel="icon" type="image/png" sizes="32x32" href="/assets/icon32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icon16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/iconapple.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>jacketpicker - @swimorthink</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .jacket-container {
      width: 90%;
      max-width: 700px;
      margin: 0.2rem auto; /* closer to header */
      text-align: center;
      position: relative;
      transform: scale(0.85);
      transform-origin: top center;
    }

    .view-picker {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 0.3rem; /* tighter */
    }

    .view-picker button {
      padding: 0.5rem 1rem;
      border-radius: 5px;
      border: 1px solid #333;
      background-color: #fff;
      cursor: pointer;
    }

    .view-picker button.active {
      background-color: #6772e5;
      color: #fff;
    }

    .jacket-frame {
      width: 100%;
      padding-top: 100%;
      background-image: url('assets/picker.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      position: relative;
      border-radius: 10px;
      margin-bottom: 0.3rem; /* tighter */
    }

    .jacket-image {
      position: absolute;
      top: 0%;
      left: 11%;
      width: 90%;
      height: 90%;
      object-fit: contain;
    }

    .price {
      font-size: 1.5rem;
      margin: 0.3rem 0; /* tighter */
    }

    .color-picker, .size-picker {
      display: flex;
      justify-content: center;
      gap: 0.4rem;
      margin-bottom: 0.3rem; /* tighter */
    }

    .color-option {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid #333;
    }

    .size-picker button {
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: 5px;
      border: 1px solid #333;
      background-color: #fff;
    }

    #addToCartBtn {
      padding: 0.8rem 1.5rem;
      font-size: 1.2rem;
      background: #6772e5;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #addToCartBtn:hover {
      background: #5469d4;
    }
  </style>
</head>
<body>
<header>
  <a href="index.html"><img src="assets/logo.gif" class="logo" alt="@swimorthink logo"></a>
  <div class="header-banner2" id="account-banner">
    <a href="login.html" id="account-link">Login</a>
  </div>
  <div class="header-banner"><a href="cart.html">Shopping Cart</a></div>
</header>

<main>
  <div class="jacket-container">

    <div class="view-picker" id="viewPicker">
      <button data-view="front" class="active">Front</button>
      <button data-view="back">Back</button>
    </div>

    <div class="jacket-frame">
      <img id="jacketImage" class="jacket-image" src="assets/full zip01/bluefront.png" alt="Full Zip Jacket">
    </div>

    <p class="price" id="jacketPrice">$275</p>

    <div class="color-picker" id="colorPicker">
      <div class="color-option" style="background-color: blue;" data-color="Blue" data-src-front="assets/full zip01/bluefront.png" data-src-back="assets/full zip01/blueback.png"></div>
      <div class="color-option" style="background-color: brown;" data-color="Brown" data-src-front="assets/full zip01/brownfront.png" data-src-back="assets/full zip01/brownback.png"></div>
      <div class="color-option" style="background-color: green;" data-color="Green" data-src-front="assets/full zip01/greenfront.png" data-src-back="assets/full zip01/greenback.png"></div>
      <div class="color-option" style="background-color: pink;" data-color="Pink" data-src-front="assets/full zip01/tessyfront.png" data-src-back="assets/full zip01/tessyback.png"></div>
      <div class="color-option" style="background-color: gray;" data-color="Gray" data-src-front="assets/full zip01/grayfront.png" data-src-back="assets/full zip01/grayback.png"></div>
    </div>

    <div class="size-picker" id="sizePicker">
      <button data-size="XS">XS</button>
      <button data-size="S">S</button>
      <button data-size="M" class="active">M</button>
      <button data-size="L">L</button>
      <button data-size="XL">XL</button>
    </div>

    <button id="addToCartBtn">Add to Cart</button>
  </div>
</main>

<footer>
  <p>Â© <span id="year"></span>. All Rights Reserved.</p>
</footer>

<script>
document.getElementById("year").textContent = new Date().getFullYear();

const isLoggedIn = localStorage.getItem("loggedIn") === "true";
const accountLink = document.getElementById("account-link");
if (isLoggedIn) { 
  accountLink.textContent = "My Account"; 
  accountLink.href = "account.html"; 
}

const jacketImage = document.getElementById("jacketImage");
const colorPicker = document.getElementById("colorPicker");
const sizePicker = document.getElementById("sizePicker");
const addToCartBtn = document.getElementById("addToCartBtn");
const viewPicker = document.getElementById("viewPicker");

let selectedColor = "Blue";
let selectedSize = "M";
let selectedView = "front";
let price = 275;

// Update jacket preview
function updateJacketImage() {
  const selectedOption = Array.from(colorPicker.children)
    .find(c => c.dataset.color === selectedColor);
  jacketImage.src = selectedView === "front" 
    ? selectedOption.dataset.srcFront 
    : selectedOption.dataset.srcBack;
}

// Color selection
colorPicker.querySelectorAll(".color-option").forEach(option => {
  option.addEventListener("click", () => {
    selectedColor = option.dataset.color;
    updateJacketImage();
  });
});

// Size selection
sizePicker.querySelectorAll("button").forEach(button => {
  button.addEventListener("click", () => {
    selectedSize = button.dataset.size;
    sizePicker.querySelectorAll("button").forEach(b => { 
      b.style.backgroundColor = "#fff"; 
      b.style.color = "#000"; 
    });
    button.style.backgroundColor = "#6772e5";
    button.style.color = "#fff";
  });
});

// View selection
viewPicker.querySelectorAll("button").forEach(button => {
  button.addEventListener("click", () => {
    selectedView = button.dataset.view;
    viewPicker.querySelectorAll("button").forEach(b => b.classList.remove("active"));
    button.classList.add("active");
    updateJacketImage();
  });
});

// Toast notification
function showToast(message) {
  const toast = document.createElement('div');
  toast.textContent = message;
  toast.style.position = 'fixed';
  toast.style.top = '20px';
  toast.style.left = '50%';
  toast.style.transform = 'translateX(-50%)';
  toast.style.background = '#6772e5';
  toast.style.color = '#fff';
  toast.style.padding = '10px 20px';
  toast.style.borderRadius = '8px';
  toast.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
  toast.style.zIndex = '1000';
  toast.style.opacity = '0';
  toast.style.transition = 'opacity 0.3s';
  document.body.appendChild(toast);

  setTimeout(() => { toast.style.opacity = '1'; }, 50);
  setTimeout(() => { 
    toast.style.opacity = '0'; 
    setTimeout(() => toast.remove(), 300); 
  }, 2000);
}

// Add to cart
addToCartBtn.addEventListener("click", () => {
  const selectedOption = Array.from(colorPicker.children)
    .find(c => c.dataset.color === selectedColor);

  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.push({
    name: "Full Zip Jacket",
    color: selectedColor,
    size: selectedSize,
    image: `assets/full zip01/${selectedColor.toLowerCase()}.png`, // representative image
    price: price
  });

  localStorage.setItem("cart", JSON.stringify(cart));
  showToast(`${selectedColor} jacket (${selectedSize}) added to cart!`);
});
</script>


</body>
</html>
